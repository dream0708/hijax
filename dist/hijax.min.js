/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

var requirejs,require,define;!function(e){function t(e,t){return g.call(e,t)}function n(e,t){var n,i,r,o,f,s,u,c,a,p,l,d=t&&t.split("/"),h=y.map,x=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=e.split("/"),f=e.length-1,y.nodeIdCompat&&w.test(e[f])&&(e[f]=e[f].replace(w,"")),e=d.concat(e),a=0;a<e.length;a+=1)if(l=e[a],"."===l)e.splice(a,1),a-=1;else if(".."===l){if(1===a&&(".."===e[2]||".."===e[0]))break;a>0&&(e.splice(a-1,2),a-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||x)&&h){for(n=e.split("/"),a=n.length;a>0;a-=1){if(i=n.slice(0,a).join("/"),d)for(p=d.length;p>0;p-=1)if(r=h[d.slice(0,p).join("/")],r&&(r=r[i])){o=r,s=a;break}if(o)break;!u&&x&&x[i]&&(u=x[i],c=a)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function i(t,n){return function(){return a.apply(e,v.call(arguments,0).concat([t,n]))}}function r(e){return function(t){return n(t,e)}}function o(e){return function(t){d[e]=t}}function f(n){if(t(h,n)){var i=h[n];delete h[n],x[n]=!0,c.apply(e,i)}if(!t(d,n)&&!t(x,n))throw new Error("No "+n);return d[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return y&&y.config&&y.config[e]||{}}}var c,a,p,l,d={},h={},y={},x={},g=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;p=function(e,t){var i,o=s(e),u=o[0];return e=o[1],u&&(u=n(u,t),i=f(u)),u?e=i&&i.normalize?i.normalize(e,r(t)):n(e,t):(e=n(e,t),o=s(e),u=o[0],e=o[1],u&&(i=f(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:i}},l={require:function(e){return i(e)},exports:function(e){var t=d[e];return"undefined"!=typeof t?t:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:u(e)}}},c=function(n,r,s,u){var c,a,y,g,v,w,m=[],j=typeof s;if(u=u||n,"undefined"===j||"function"===j){for(r=!r.length&&s.length?["require","exports","module"]:r,v=0;v<r.length;v+=1)if(g=p(r[v],u),a=g.f,"require"===a)m[v]=l.require(n);else if("exports"===a)m[v]=l.exports(n),w=!0;else if("module"===a)c=m[v]=l.module(n);else if(t(d,a)||t(h,a)||t(x,a))m[v]=f(a);else{if(!g.p)throw new Error(n+" missing "+a);g.p.load(g.n,i(u,!0),o(a),{}),m[v]=d[a]}y=s?s.apply(d[n],m):void 0,n&&(c&&c.exports!==e&&c.exports!==d[n]?d[n]=c.exports:y===e&&w||(d[n]=y))}else n&&(d[n]=s)},requirejs=require=a=function(t,n,i,r,o){if("string"==typeof t)return l[t]?l[t](n):f(p(t,n).f);if(!t.splice){if(y=t,y.deps&&a(y.deps,y.callback),!n)return;n.splice?(t=n,n=i,i=null):t=e}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?c(e,t,n,i):setTimeout(function(){c(e,t,n,i)},4),a},a.config=function(e){return a(e)},requirejs._defined=d,define=function(e,n,i){n.splice||(i=n,n=[]),t(d,e)||t(h,e)||(h[e]=[e,n,i])},define.amd={jQuery:!0}}(),define("almond",function(){}),define("src/utils",[],function(){function e(e,t,n){var i=e;return function(){var r;if("function"!=typeof e)throw e+" is not a function, and cannot be proxied!";return"function"==typeof t&&t.apply(this,arguments),r=i.apply(this,arguments),"function"==typeof n&&n.apply(this,arguments),r}}return{proxy:e}}),define("src/hijacker",["src/utils"],function(){function e(e,t,n){if(!e||!t||!n||"object"!=typeof n)throw"Missing or invalid Hijacker proxy initialization options";this.name=e,this.condition="function"==typeof t?t:function(e){return t===e},this.callbacks={beforeSend:[],receive:[],complete:[]};for(var i in n)n.hasOwnProperty(i)&&this.callbacks[i].push(n[i]);return this}return e.prototype.fireEvent=function(e,t){var n=this.callbacks[e],i=t.response;if(this.condition(t.url))for(var r=0;r<n.length;r++)n[r].call(this,i,t.statusText,t)},e.prototype.addListener=function(e,t){this.callbacks[e].push(t)},e}),define("src/hijax",["src/utils","src/hijacker"],function(e,t){function n(){this.proxies={},this.active=0}if(window.hijax)return window.hijax;var i,r={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};return n.prototype.getXHRMethod=function(e){return window.XMLHttpRequest.prototype[e]},n.prototype.setXHRMethod=function(e,t){window.XMLHttpRequest.prototype[e]=t},n.prototype.proxyXhrMethod=function(t,n,i){var r=e.proxy(this.getXHRMethod(t),n,i);this.setXHRMethod(t,r)},n.prototype.createProxy=function(e,n,i){var r=new t(e,n,i);return this.proxies[e]=r,r},n.prototype.set=function(e,t,n){return this.createProxy(e,t,n)},n.prototype.addListener=function(e,t,n){if(!(e in this.proxies))throw e+" proxy does not exist!";this.proxies[e].addListener(t,n)},n.prototype.dispatch=function(e,t,n){var i=this.proxies;for(var r in i)i.hasOwnProperty(r)&&i[r].fireEvent(e,t);"function"==typeof n&&n()},i=window.hijax=new n,i.proxyXhrMethod("open",function(e,t){this.url=t,i.active++,i.dispatch("beforeSend",this)}),i.proxyXhrMethod("send",function(){var t=this,n=function(){i.dispatch("receive",t)},o=function(){t.readyState===r.DONE&&i.dispatch("complete",t,function(){i.active--})},f=function(){t.proxied||("function"==typeof t.onreadystatechange?(t.onreadystatechange=e.proxy(t.onreadystatechange,n,o),t.proxied=!0):"function"==typeof t.onload?(t.onload=e.proxy(t.onload,n,o),t.proxied=!0):t.readyState===r.LOADING?n():t.readyState===r.DONE&&o())};t.addEventListener("readystatechange",f,!1)}),i});